<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="referrer" content="no-referrer-when-downgrade">
    

    <title>【初识Go】| Day11 反射机制 | 于硕·Blog</title>
    <meta property="og:title" content="【初识Go】| Day11 反射机制 - 于硕·Blog">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-12-24T14:09:22&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-12-24T14:09:22&#43;08:00'>
        
    <meta name="Keywords" content="golang,go语言,go语言笔记,java,android,blog,博客,项目管理,python,软件架构,公众号,小程序">
    <meta name="description" content="【初识Go】| Day11 反射机制">
        
    <meta name="author" content="yussuy">
    <meta property="og:url" content="https://www.yushuo.me/post/go_babystep11/">
    <link rel="shortcut icon" href='/favicon.ico'  type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
        <link rel="stylesheet" href='/css/douban.css'>
    
        <link rel="stylesheet" href='/css/other.css'>
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://www.yushuo.me">
                        于硕·Blog
                    </a>
                
                <p class="description">克己 慎独 &amp;&amp; 我的征途，是星辰大海</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="https://www.yushuo.me">首页</a>
                    
                    <a  href="https://www.yushuo.me/tools/" title="常用代码">常用代码</a>
                    
                    <a  href="https://www.yushuo.me/archives/" title="归档">归档</a>
                    
                    <a  href="https://www.yushuo.me/about/" title="关于">关于</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    <style type="text/css">
    .post-toc {
        position: fixed;
        width: 200px;
        margin-left: -210px;
        padding: 5px 10px;
        font-family: Athelas, STHeiti, Microsoft Yahei, serif;
        font-size: 12px;
        border: 1px solid rgba(0, 0, 0, .07);
        border-radius: 5px;
        background-color: rgba(255, 255, 255, 0.98);
        background-clip: padding-box;
        -webkit-box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        word-wrap: break-word;
        white-space: nowrap;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        z-index: 999;
        cursor: pointer;
        max-height: 70%;
        overflow-y: auto;
        overflow-x: hidden;
    }

    .post-toc .post-toc-title {
        width: 100%;
        margin: 0 auto;
        font-size: 20px;
        font-weight: 400;
        text-transform: uppercase;
        text-align: center;
    }

    .post-toc .post-toc-content {
        font-size: 15px;
    }

    .post-toc .post-toc-content>nav>ul {
        margin: 10px 0;
    }

    .post-toc .post-toc-content ul {
        padding-left: 20px;
        list-style: square;
        margin: 0.5em;
        line-height: 1.8em;
    }

    .post-toc .post-toc-content ul ul {
        padding-left: 15px;
        display: none;
    }

    @media print,
    screen and (max-width:1057px) {
        .post-toc {
            display: none;
        }
    }
</style>
<div class="post-toc" style="position: absolute; top: 188px;">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#反射是什么">反射是什么</a></li>
    <li><a href="#反射的作用">反射的作用</a></li>
    <li><a href="#反射的实现">反射的实现</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#反射的实践">反射的实践</a>
      <ul>
        <li><a href="#通过反射修改内容"><strong>通过反射修改内容</strong></a></li>
        <li><a href="#通过反射调用方法"><strong>通过反射调用方法</strong></a></li>
      </ul>
    </li>
    <li><a href="#建议">建议</a></li>
    <li><a href="#参考资料">参考资料</a></li>
  </ul>
</nav>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        var postToc = $(".post-toc");
        if (postToc.length) {
            var leftPos = $("#main").offset().left;
            if(leftPos<220){
                postToc.css({"width":leftPos-10,"margin-left":(0-leftPos)})
            }

            var t = postToc.offset().top - 20,
                a = {
                    start: {
                        position: "absolute",
                        top: t
                    },
                    process: {
                        position: "fixed",
                        top: 20
                    },
                };
            $(window).scroll(function () {
                var e = $(window).scrollTop();
                e < t ? postToc.css(a.start) : postToc.css(a.process)
            })
        }
    })
</script>
    <article class="post">
        <header>
            <h1 class="post-title">【初识Go】| Day11 反射机制</h1>
        </header>
        <date class="post-meta meta-date">
            2020年12月24日
        </date>
        
        <div class="post-meta">
            <span>|</span>
            
            <span class="meta-category"><a href='/categories/Golang'>Golang</a></span>
            
        </div>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            <h2 id="反射是什么">反射是什么</h2>
<blockquote>
<p>反射的概念是由Smith在1982年首次提出的，主要是指程序可以访问、检测和修改它本身状态或行为的一种能力。</p>
<p>有时候我们需要编写一个函数能够处理一类并不满足普通公共接口的类型的值，也可能是因为它们并没有确定的表示方式，或者是在我们设计该函数的时候这些类型可能还不存在。</p>
</blockquote>
<blockquote>
<p>Go 语言提供了一种机制在运行时更新变量和检查它们的值、调用它们的方法，但是在编译时并不知道这些变量的具体类型，这称为反射机制。</p>
</blockquote>
<h2 id="反射的作用">反射的作用</h2>
<p><strong>1.在编写不定传参类型函数的时候，或传入类型过多时</strong></p>
<p>典型应用是对象关系映射</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#000;font-weight:bold">type</span> User <span style="color:#000;font-weight:bold">struct</span> {
  gorm.Model
  Name         <span style="color:#458;font-weight:bold">string</span>
  Age          sql.NullInt64
  Birthday     <span style="color:#000;font-weight:bold">*</span>time.Time
  Email        <span style="color:#458;font-weight:bold">string</span>  <span style="color:#d14">`gorm:&#34;type:varchar(100);unique_index&#34;`</span>
  Role         <span style="color:#458;font-weight:bold">string</span>  <span style="color:#d14">`gorm:&#34;size:255&#34;`</span> <span style="color:#998;font-style:italic">// set field size to 255
</span><span style="color:#998;font-style:italic"></span>  MemberNumber <span style="color:#000;font-weight:bold">*</span><span style="color:#458;font-weight:bold">string</span> <span style="color:#d14">`gorm:&#34;unique;not null&#34;`</span> <span style="color:#998;font-style:italic">// set member number to unique and not null
</span><span style="color:#998;font-style:italic"></span>  Num          <span style="color:#458;font-weight:bold">int</span>     <span style="color:#d14">`gorm:&#34;AUTO_INCREMENT&#34;`</span> <span style="color:#998;font-style:italic">// set num to auto incrementable
</span><span style="color:#998;font-style:italic"></span>  Address      <span style="color:#458;font-weight:bold">string</span>  <span style="color:#d14">`gorm:&#34;index:addr&#34;`</span> <span style="color:#998;font-style:italic">// create index with name `addr` for address
</span><span style="color:#998;font-style:italic"></span>  IgnoreMe     <span style="color:#458;font-weight:bold">int</span>     <span style="color:#d14">`gorm:&#34;-&#34;`</span> <span style="color:#998;font-style:italic">// ignore this field
</span><span style="color:#998;font-style:italic"></span>}

<span style="color:#000;font-weight:bold">var</span> users []User
db.<span style="color:#900;font-weight:bold">Find</span>(<span style="color:#000;font-weight:bold">&amp;</span>users)
</code></pre></td></tr></table>
</div>
</div><p><strong>2.不确定调用哪个函数，需要根据某些条件来动态执行</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">bridge</span>(funcPtr <span style="color:#000;font-weight:bold">interface</span>{}, args <span style="color:#000;font-weight:bold">...</span><span style="color:#000;font-weight:bold">interface</span>{})
</code></pre></td></tr></table>
</div>
</div><p>第一个参数funcPtr以接口的形式传入函数指针，函数参数args以可变参数的形式传入，bridge函数中可以用反射来动态执行funcPtr函数。</p>
<h2 id="反射的实现">反射的实现</h2>
<p>Go的反射基础是接口和类型系统，Go的反射机制是通过接口来进行的。</p>
<p>反射是由 reflect 包提供的。 它定义了两个重要的类型, Type 和 Value. 一个 Type 表示一个Go类型. 它是一个接口, 有许多方法来区分类型以及检查它们的组成部分, 例如一个结构体的成员或一个函数的参数等. 唯一能反映 reflect.Type 实现的是接口的类型描述信息, 也正是这个实体标识了接口值的动态类型.</p>
<p>Go 语言在 reflect 包里定义了各种类型，实现了反射的各种函数，通过它们可以在运行时检测类型的信息、改变类型的值。</p>
<h4 id="反射三定律">反射三定律</h4>
<p><strong>1.反射可以将“接口类型变量”转换为“反射类型对象”。</strong></p>
<p>反射提供一种机制，允许程序在运行时访问接口内的数据。首先介绍一下reflect包里的两个方法<strong>reflect.Value</strong>和<strong>reflect.Type</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#000;font-weight:bold">package</span> main

<span style="color:#000;font-weight:bold">import</span> (
	<span style="color:#d14">&#34;fmt&#34;</span>
	<span style="color:#d14">&#34;reflect&#34;</span>
)

<span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">main</span>() {
	<span style="color:#000;font-weight:bold">var</span> Num <span style="color:#458;font-weight:bold">float64</span> = <span style="color:#099">3.14</span>

	v <span style="color:#000;font-weight:bold">:=</span> reflect.<span style="color:#900;font-weight:bold">ValueOf</span>(Num)
	t <span style="color:#000;font-weight:bold">:=</span> reflect.<span style="color:#900;font-weight:bold">TypeOf</span>(Num)

	fmt.<span style="color:#900;font-weight:bold">Println</span>(<span style="color:#d14">&#34;Reflect : Num.Value = &#34;</span>, v)
	fmt.<span style="color:#900;font-weight:bold">Println</span>(<span style="color:#d14">&#34;Reflect : Num.Type  = &#34;</span>, t)
}
</code></pre></td></tr></table>
</div>
</div><p>返回</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">Reflect : Num.Value =  <span style="color:#099">3.14</span>
Reflect : Num.Type  =  <span style="color:#458;font-weight:bold">float64</span>
</code></pre></td></tr></table>
</div>
</div><p>上面的例子通过reflect.ValueOf和reflect.TypeOf将接口类型变量分别转换为反射类型对象v和t，v是Num的值，t也是Num的类型。</p>
<p>先来看一下reflect.ValueOf和reflect.TypeOf的函数签名</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">TypeOf</span>(i <span style="color:#000;font-weight:bold">interface</span>{}) Type
<span style="color:#000;font-weight:bold">func</span> (v Value) <span style="color:#900;font-weight:bold">Interface</span>() (i <span style="color:#000;font-weight:bold">interface</span>{})
</code></pre></td></tr></table>
</div>
</div><p>两个方法的参数类型都是空接口</p>
<p>在整个过程中，当我们调用reflect.TypeOf(x)的时候，</p>
<p>当我们调用reflect.TypeOf(x)的时候，Num会被存储在这个空接口中，然后reflect.TypeOf再对空接口进行拆解，将接口类型变量转换为反射类型变量</p>
<p><strong>2.反射可以将“反射类型对象”转换为“接口类型变量”。</strong></p>
<p>定律2是定律1的反过程。</p>
<p>根据一个 reflect.Value 类型的变量，我们可以使用 Interface 方法恢复其接口类型的值。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#000;font-weight:bold">package</span> main
<span style="color:#000;font-weight:bold">import</span> (
    <span style="color:#d14">&#34;fmt&#34;</span>
    <span style="color:#d14">&#34;reflect&#34;</span>
)
<span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">main</span>() {
    <span style="color:#000;font-weight:bold">var</span> Num = <span style="color:#099">3.14</span>
    v <span style="color:#000;font-weight:bold">:=</span> reflect.<span style="color:#900;font-weight:bold">ValueOf</span>(Num)
    t <span style="color:#000;font-weight:bold">:=</span> reflect.<span style="color:#900;font-weight:bold">TypeOf</span>(Num)
    fmt.<span style="color:#900;font-weight:bold">Println</span>(v)
    fmt.<span style="color:#900;font-weight:bold">Println</span>(t)

    origin <span style="color:#000;font-weight:bold">:=</span> v.<span style="color:#900;font-weight:bold">Interface</span>().(<span style="color:#458;font-weight:bold">float64</span>)
    fmt.<span style="color:#900;font-weight:bold">Println</span>(origin)
}
</code></pre></td></tr></table>
</div>
</div><p>返回</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#099">3.14</span>
<span style="color:#458;font-weight:bold">float64</span>
<span style="color:#099">3.14</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>3.如果要修改“反射类型对象”，其值必须是“可写的”。</strong></p>
<p>运行一下程序：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#000;font-weight:bold">package</span> main
<span style="color:#000;font-weight:bold">import</span> (
    <span style="color:#d14">&#34;reflect&#34;</span>
)
<span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">main</span>() {
        <span style="color:#000;font-weight:bold">var</span> Num <span style="color:#458;font-weight:bold">float64</span> = <span style="color:#099">3.14</span>
        v <span style="color:#000;font-weight:bold">:=</span> reflect.<span style="color:#900;font-weight:bold">ValueOf</span>(Num)
        v.<span style="color:#900;font-weight:bold">SetFloat</span>(<span style="color:#099">6.18</span>)
}
</code></pre></td></tr></table>
</div>
</div><p>出现panic了</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">panic: reflect: reflect.Value.SetFloat using unaddressable value

goroutine <span style="color:#099">1</span> [running]:
reflect.flag.<span style="color:#900;font-weight:bold">mustBeAssignableSlow</span>(<span style="color:#099">0x8e</span>)
	<span style="color:#000;font-weight:bold">/</span>usr<span style="color:#000;font-weight:bold">/</span>local<span style="color:#000;font-weight:bold">/</span><span style="color:#000;font-weight:bold">go</span><span style="color:#000;font-weight:bold">/</span>src<span style="color:#000;font-weight:bold">/</span>reflect<span style="color:#000;font-weight:bold">/</span>value.<span style="color:#000;font-weight:bold">go</span>:<span style="color:#099">259</span> <span style="color:#000;font-weight:bold">+</span><span style="color:#099">0x138</span>
reflect.flag.<span style="color:#900;font-weight:bold">mustBeAssignable</span>(<span style="color:#000;font-weight:bold">...</span>)
	<span style="color:#000;font-weight:bold">/</span>usr<span style="color:#000;font-weight:bold">/</span>local<span style="color:#000;font-weight:bold">/</span><span style="color:#000;font-weight:bold">go</span><span style="color:#000;font-weight:bold">/</span>src<span style="color:#000;font-weight:bold">/</span>reflect<span style="color:#000;font-weight:bold">/</span>value.<span style="color:#000;font-weight:bold">go</span>:<span style="color:#099">246</span>
reflect.Value.<span style="color:#900;font-weight:bold">SetFloat</span>(<span style="color:#099">0x488ec0</span>, <span style="color:#099">0xc00001a0b8</span>, <span style="color:#099">0x8e</span>, <span style="color:#099">0x4018b851eb851eb8</span>)
	<span style="color:#000;font-weight:bold">/</span>usr<span style="color:#000;font-weight:bold">/</span>local<span style="color:#000;font-weight:bold">/</span><span style="color:#000;font-weight:bold">go</span><span style="color:#000;font-weight:bold">/</span>src<span style="color:#000;font-weight:bold">/</span>reflect<span style="color:#000;font-weight:bold">/</span>value.<span style="color:#000;font-weight:bold">go</span>:<span style="color:#099">1609</span> <span style="color:#000;font-weight:bold">+</span><span style="color:#099">0x37</span>
main.<span style="color:#900;font-weight:bold">main</span>()
	<span style="color:#000;font-weight:bold">/</span>home<span style="color:#000;font-weight:bold">/</span>ricardo<span style="color:#000;font-weight:bold">/</span><span style="color:#458;font-weight:bold">error</span>.<span style="color:#000;font-weight:bold">go</span>:<span style="color:#099">8</span> <span style="color:#000;font-weight:bold">+</span><span style="color:#099">0xb3</span>
exit status <span style="color:#099">2</span>
</code></pre></td></tr></table>
</div>
</div><p>因为反射对象v包含的是副本值，所以无法修改。</p>
<p>我们可以通过CanSet函数来判断反射对象是否可以修改，如下：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#000;font-weight:bold">package</span> main
<span style="color:#000;font-weight:bold">import</span> (
    <span style="color:#d14">&#34;fmt&#34;</span>
    <span style="color:#d14">&#34;reflect&#34;</span>
)
<span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">main</span>() {
    <span style="color:#000;font-weight:bold">var</span> Num <span style="color:#458;font-weight:bold">float64</span> = <span style="color:#099">3.14</span>
    v <span style="color:#000;font-weight:bold">:=</span> reflect.<span style="color:#900;font-weight:bold">ValueOf</span>(Num)
    fmt.<span style="color:#900;font-weight:bold">Println</span>(<span style="color:#d14">&#34;v的可写性:&#34;</span>, v.<span style="color:#900;font-weight:bold">CanSet</span>())
}
</code></pre></td></tr></table>
</div>
</div><p><strong>小结</strong></p>
<p>1.反射对象包含了接口变量中存储的值以及类型。</p>
<p>2.如果反射对象中包含的值是原始值，那么可以通过反射对象修改原始值；</p>
<p>3.如果反射对象中包含的值不是原始值（反射对象包含的是副本值或指向原始值的地址），则该反射对象不可以修改。</p>
<h2 id="反射的实践">反射的实践</h2>
<h3 id="通过反射修改内容"><strong>通过反射修改内容</strong></h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#000;font-weight:bold">var</span> f <span style="color:#458;font-weight:bold">float64</span> = <span style="color:#099">3.41</span>
fmt.<span style="color:#900;font-weight:bold">Println</span>(f)
p <span style="color:#000;font-weight:bold">:=</span> reflect.<span style="color:#900;font-weight:bold">ValueOf</span>(<span style="color:#000;font-weight:bold">&amp;</span>f)
v <span style="color:#000;font-weight:bold">:=</span> p.<span style="color:#900;font-weight:bold">Elem</span>()
v.<span style="color:#900;font-weight:bold">SetFloat</span>(<span style="color:#099">6.18</span>)
fmt.<span style="color:#900;font-weight:bold">Println</span>(f)
</code></pre></td></tr></table>
</div>
</div><p>reflect.Elem() 方法获取这个指针指向的元素类型。这个获取过程被称为取元素，等效于对指针类型变量做了一个*操作</p>
<h3 id="通过反射调用方法"><strong>通过反射调用方法</strong></h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#000;font-weight:bold">package</span> main

<span style="color:#000;font-weight:bold">import</span> (
        <span style="color:#d14">&#34;fmt&#34;</span>
        <span style="color:#d14">&#34;reflect&#34;</span>
)

<span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">hello</span>() {
  fmt.<span style="color:#900;font-weight:bold">Println</span>(<span style="color:#d14">&#34;Hello world!&#34;</span>)
}

<span style="color:#000;font-weight:bold">func</span> <span style="color:#900;font-weight:bold">main</span>() {
  hl <span style="color:#000;font-weight:bold">:=</span> hello
  fv <span style="color:#000;font-weight:bold">:=</span> reflect.<span style="color:#900;font-weight:bold">ValueOf</span>(hl)
  fv.<span style="color:#900;font-weight:bold">Call</span>(<span style="color:#000;font-weight:bold">nil</span>)
}
</code></pre></td></tr></table>
</div>
</div><p>反射会使得代码执行效率较慢，原因有</p>
<p>1.涉及到内存分配以及后续的垃圾回收</p>
<p>2.reflect实现里面有大量的枚举，也就是for循环，比如类型之类的</p>
<h2 id="建议">建议</h2>
<p>虽然反射提供的API远多于我们讲到的，我们前面的例子主要是给出了一个方向，通过反射可以实现哪些功能。反射是一个强大并富有表达力的工具，但是它应该被小心地使用，原因有三。</p>
<p>第一个原因是，基于反射的代码是比较脆弱的。对于每一个会导致编译器报告类型错误的问题，在反射中都有与之相对应的误用问题，不同的是编译器会在构建时马上报告错误，而反射则是在真正运行到的时候才会抛出panic异常，可能是写完代码很久之后了，而且程序也可能运行了很长的时间。</p>
<p>以前面的readList函数（<a href="http://shouce.jb51.net/gopl-zh/ch12/ch12-06.html">§12.6</a>）为例，为了从输入读取字符串并填充int类型的变量而调用的reflect.Value.SetString方法可能导致panic异常。绝大多数使用反射的程序都有类似的风险，需要非常小心地检查每个reflect.Value的对于值的类型、是否可取地址，还有是否可以被修改等。</p>
<p>避免这种因反射而导致的脆弱性的问题的最好方法是将所有的反射相关的使用控制在包的内部，如果可能的话避免在包的API中直接暴露reflect.Value类型，这样可以限制一些非法输入。如果无法做到这一点，在每个有风险的操作前指向额外的类型检查。以标准库中的代码为例，当fmt.Printf收到一个非法的操作数是，它并不会抛出panic异常，而是打印相关的错误信息。程序虽然还有BUG，但是会更加容易诊断。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Go" data-lang="Go">fmt.<span style="color:#900;font-weight:bold">Printf</span>(<span style="color:#d14">&#34;%d %s\n&#34;</span>, <span style="color:#d14">&#34;hello&#34;</span>, <span style="color:#099">42</span>) <span style="color:#998;font-style:italic">// &#34;%!d(string=hello) %!s(int=42)&#34;
</span></code></pre></td></tr></table>
</div>
</div><p>反射同样降低了程序的安全性，还影响了自动化重构和分析工具的准确性，因为它们无法识别运行时才能确认的类型信息。</p>
<p>避免使用反射的第二个原因是，即使对应类型提供了相同文档，但是反射的操作不能做静态类型检查，而且大量反射的代码通常难以理解。总是需要小心翼翼地为每个导出的类型和其它接受interface{}或reflect.Value类型参数的函数维护说明文档。</p>
<p>第三个原因，基于反射的代码通常比正常的代码运行速度慢一到两个数量级。对于一个典型的项目，大部分函数的性能和程序的整体性能关系不大，所以使用反射可能会使程序更加清晰。测试是一个特别适合使用反射的场景，因为每个测试的数据集都很小。但是对于性能关键路径的函数，最好避免使用反射。</p>
<h2 id="参考资料">参考资料</h2>
<p><a href="https://github.com/datawhalechina/go-talent/blob/master/10.%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6.md">https://github.com/datawhalechina/go-talent/blob/master/10.%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6.md</a></p>
<p><a href="http://shouce.jb51.net/gopl-zh/ch12/ch12-02.html">http://shouce.jb51.net/gopl-zh/ch12/ch12-02.html</a></p>

        </div>

        
<div class="post-archive">
    <ul class="post-copyright">
        <li><strong>原文作者：</strong><a rel="author" href="https://www.yushuo.me">yussuy</a></li>
        <li style="word-break:break-all"><strong>原文链接：</strong><a href="https://www.yushuo.me/post/go_babystep11/">https://www.yushuo.me/post/go_babystep11/</a></li>
        <li><strong>版权声明：</strong>本作品采用<a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a>进行许可，非商业转载请注明出处（作者，原文链接），商业转载请联系作者获得授权。</li>
    </ul>
</div>
<br/>



        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/post/go_babystep10/">【初识Go】| Day10 异常处理</a></li>
        
        <li><a href="/post/go_babystep9/">【初识Go】| Day9 包管理</a></li>
        
        <li><a href="/post/go_babystep8/">【初识Go】| Day8 结构体、方法、接口</a></li>
        
        <li><a href="/post/go_babystep7/">【初识Go】| Day7 函数</a></li>
        
        <li><a href="/post/go_babystep6/">【初识Go】| Day6 数组、切片</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='/tags/go'>go</a></li>
                
                <li><a href='/tags/golang'>golang</a></li>
                
            </ul>
            
        </div>
    </article>
    
    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "yourdiscussshortname" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    
    
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "your github repo"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
      </script>
    </div>
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2020 <a href="https://www.yushuo.me">于硕·Blog By yussuy</a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




    <script src='/js/douban.js'></script>

                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://www.yushuo.me/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://www.yushuo.me">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://www.yushuo.me/post/go_babystep13/" title="【初识Go】| Day13 并发编程">【初识Go】| Day13 并发编程</a>
    </li>
    
    <li>
        <a href="https://www.yushuo.me/post/go_babystep12/" title="【初识Go】| Day12 单元测试">【初识Go】| Day12 单元测试</a>
    </li>
    
    <li>
        <a href="https://www.yushuo.me/post/go_babystep11/" title="【初识Go】| Day11 反射机制">【初识Go】| Day11 反射机制</a>
    </li>
    
    <li>
        <a href="https://www.yushuo.me/post/go_babystep10/" title="【初识Go】| Day10 异常处理">【初识Go】| Day10 异常处理</a>
    </li>
    
    <li>
        <a href="https://www.yushuo.me/post/go_babystep9/" title="【初识Go】| Day9 包管理">【初识Go】| Day9 包管理</a>
    </li>
    
    <li>
        <a href="https://www.yushuo.me/post/go_babystep8/" title="【初识Go】| Day8 结构体、方法、接口">【初识Go】| Day8 结构体、方法、接口</a>
    </li>
    
    <li>
        <a href="https://www.yushuo.me/post/go_babystep7/" title="【初识Go】| Day7 函数">【初识Go】| Day7 函数</a>
    </li>
    
    <li>
        <a href="https://www.yushuo.me/post/go_babystep6/" title="【初识Go】| Day6 数组、切片">【初识Go】| Day6 数组、切片</a>
    </li>
    
    <li>
        <a href="https://www.yushuo.me/post/go_babystep5/" title="【初识Go】| Day5 字典、字符串">【初识Go】| Day5 字典、字符串</a>
    </li>
    
    <li>
        <a href="https://www.yushuo.me/post/go_babystep4/" title="【初识Go】| Day4 运算符、控制语句">【初识Go】| Day4 运算符、控制语句</a>
    </li>
    
</ul>
    </section>

    
<section class="widget">
    <h3 class="widget-title" style="color:red">福利派送</h3>
    <ul class="widget-list">
        
        <li>
            <a href="" title="【2019双12】ALL IN CLoud 低至1折" target="_blank" style="color:red">
                
                    <img src="https://img.alicdn.com/tfs/TB1_rYHo7P2gK0jSZPxXXacQpXa-690-388.jpg">
                
            </a>
        </li>
        
        <li>
            <a href="" title="助力产业智慧升级，云服务器首年88元起，更有千元代金券礼包免费领！" target="_blank" style="color:red">
                
                    <img src="https://upload-dianshi-1255598498.file.myqcloud.com/345-7c71532bd4935fbdd9a67c1a71e577b1767b805c.200%E7%89%88%E6%9C%ACB.jpg">
                
            </a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title"><a href='/categories/'>分类</a></h3>
<ul class="widget-list">
    
    <li><a href="https://www.yushuo.me/categories/Golang/">Golang (13)</a></li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href='/tags/'>标签</a></h3>
<div class="tagcloud">
    
    <a href="https://www.yushuo.me/tags/go/">go</a>
    
    <a href="https://www.yushuo.me/tags/golang/">golang</a>
    
</div>
    </section>

    
<section class="widget">
    <h3 class="widget-title">友情链接</h3>
    <ul class="widget-list">
        
        <li>
            <a target="_blank" href="https://blog.csdn.net/u014759944" title="我的CSDN博客">我的CSDN博客</a>
        </li>
        
        <li>
            <a target="_blank" href="https://cloud.tencent.com/developer/user/1424460/activities" title="我的腾讯云&#43;社区">我的腾讯云&#43;社区</a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://www.yushuo.me/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>